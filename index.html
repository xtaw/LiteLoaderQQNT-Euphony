<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Home</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="fallback-light"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Euphony</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="At.html">At</a></div><div class="sidebar-section-children"><a href="AtAll.html">AtAll</a></div><div class="sidebar-section-children"><a href="Audio.html">Audio</a></div><div class="sidebar-section-children"><a href="Cache.html">Cache</a></div><div class="sidebar-section-children"><a href="Client.html">Client</a></div><div class="sidebar-section-children"><a href="Contact.html">Contact</a></div><div class="sidebar-section-children"><a href="EventChannel.html">EventChannel</a></div><div class="sidebar-section-children"><a href="Friend.html">Friend</a></div><div class="sidebar-section-children"><a href="Group.html">Group</a></div><div class="sidebar-section-children"><a href="Image.html">Image</a></div><div class="sidebar-section-children"><a href="Member.html">Member</a></div><div class="sidebar-section-children"><a href="MessageChain.html">MessageChain</a></div><div class="sidebar-section-children"><a href="MessageSource.html">MessageSource</a></div><div class="sidebar-section-children"><a href="PlainText.html">PlainText</a></div><div class="sidebar-section-children"><a href="Raw.html">Raw</a></div><div class="sidebar-section-children"><a href="SingleMessage.html">SingleMessage</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#convertUidToUin">convertUidToUin</a></div><div class="sidebar-section-children"><a href="global.html#convertUinToUid">convertUinToUid</a></div><div class="sidebar-section-children"><a href="global.html#invokeNative">invokeNative</a></div><div class="sidebar-section-children"><a href="global.html#subscribeEvent">subscribeEvent</a></div><div class="sidebar-section-children"><a href="global.html#unsubscribeEvent">unsubscribeEvent</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section class="readme"><article><h1 id="%E4%B8%80.-%E4%BB%80%E4%B9%88%E6%98%AF-euphony">一. 什么是 Euphony</h1><p><strong>Euphony</strong> 是一个为 <strong>LiteLoaderQQNT</strong> 插件提供基础功能的依赖。通过 <strong>Euphony</strong>，你可以简单快速地实现你需要的功能。</p><h1 id="%E4%BA%8C.-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">二. 使用方法</h1><p>请注意，<strong>Euphony</strong> 的代码均应运行在 <code>renderer.js</code> 中，而不是 <code>main.js</code> 或 <code>preload.js</code>。</p><p>你可以通过以下两种方式在你的插件中使用 <strong>Euphony</strong> 所提供的 API：</p><h2 id="1.-%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8-window-%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1">1. 直接使用 window 中的对象</h2><p><strong>Euphony</strong> 插件会在本身被加载时向 <strong>window</strong> 中导出一个名为 <strong>euphony</strong> 的对象，其中包含所有 API。你可以直接使用它来访问你所需要的 API。</p><h3 id="%E7%A4%BA%E4%BE%8B">示例</h3><pre class="prettyprint source lang-js"><code>const friend = euphony.Friend.fromUin(10000);
friend.sendMessage(new euphony.PlainText('Hello World!'));
</code></pre><p>这段代码会向 <strong>qq号</strong> 为 <strong>10000</strong> 的好友发送一条内容为 <strong>Hello World!</strong> 的纯文本消息。</p><h2 id="2.-%E6%B7%BB%E5%8A%A0%E8%87%B3%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96-(%E6%8E%A8%E8%8D%90)">2. 添加至项目依赖 (推荐)</h2><p><strong>Euphony</strong> 本身可作为依赖导入你的项目。你可以将 <strong>Euphony</strong> 插件文件夹放入到你的项目中并导入，该方法可避免因依赖更新造成的插件bug。</p><p>例如你的项目文件夹为 <code>LiteLoaderQQNT-Plugin</code>，<code>renderer.js</code> 位于 <code>LiteLoaderQQNT-Plugin/src/renderer.js</code>，你可以将 <strong>Euphony</strong> 复制到 <code>LiteLoaderQQNT-Plugin/LiteLoaderQQNT-Euphony</code>。</p><p>现在，你可以直接在你的代码中使用 <code>import</code> 语句来导入 API：</p><pre class="prettyprint source lang-js"><code>import { Friend, PlainText } from '../LiteLoaderQQNT-Euphony/src/index.js';
</code></pre><p>具体有哪些可用的 API 可以在下文查看。</p><h3 id="%E7%A4%BA%E4%BE%8B-1">示例</h3><pre class="prettyprint source lang-js"><code>import { Group, AtAll, PlainText, MessageChain } from '../LiteLoaderQQNT-Euphony/src/index.js';
const group = Group.make(10000);
group.sendMessage(new MessageChain().append(new AtAll('Content')).append(new PlainText('Hello World!')));
</code></pre><p>这段代码会向 <strong>群号</strong> 为 <strong>10000</strong> 的群发送一条消息，其中包含一个显示为 <strong>Content</strong> 的@全体成员，以及一个内容为 <strong>Hello World!</strong> 的纯文本。</p><h2 id="%E8%AF%B4%E6%98%8E">说明</h2><p>无论使用以上哪种方法，都必须添加 <strong>Euphony</strong> 本身至 <strong>LiteLoaderQQNT</strong> 中作为插件加载。</p><h1 id="%E4%B8%89.-api%E4%BB%8B%E7%BB%8D">三. API介绍</h1><p>你可以在这里查看所有API介绍：<a href="https://xtaw.github.io/LiteLoaderQQNT-Euphony/">API文档</a></p><p>请注意，由于 <strong>Euphony</strong> 目前正处于开发初期，各 API 并不稳定，很可能在将来发生很大变化。</p><h2 id="1.-native">1. Native</h2><p><strong>Euphony</strong> 在 <code>preload.js</code> 中导出了 <code>euphonyNative</code> 对象用于一些与 qq 底层交互的操作。 你可以在 <a href="https://xtaw.github.io/LiteLoaderQQNT-Euphony/">API文档</a> 中的 <strong>Global</strong> 部分查看详情介绍。</p><h2 id="2.-%E5%B0%81%E8%A3%85%E4%BA%8B%E4%BB%B6">2. 封装事件</h2><h3 id="%E7%A4%BA%E4%BE%8B-2">示例</h3><pre class="prettyprint source lang-js"><code>import { EventChannel } from '../LiteLoaderQQNT-Euphony/src/index.js';
const eventChannel = EventChannel.withTriggers();
eventChannel.subscribeEvent('receive-message', (message, source) => {
    console.log(message.contentToString());
    console.log(source.getContact().getId());
});
</code></pre><p>上面这段代码会监听 <strong>receive-message</strong> 事件，并输出消息的字符串形式及消息发送者的 <strong>id</strong>。</p><h3 id="(1).-receive-message">(1). receive-message</h3><p>该事件触发于当qq接收到新消息时。</p><p>事件会传入 <code>MessageChain</code> 和 <code>MessageSource</code> 作为参数，表示接收到的新消息及消息来源。</p><h3 id="(2).-send-message">(2). send-message</h3><p>该事件触发于当qq发送出新消息时。</p><p>事件会传入 <code>MessageChain</code> 和 <code>MessageSource</code> 作为参数，表示发送出的新消息及消息来源。</p><p>请注意，该事件在本地消息显示发出后便会触发，而不是服务器收到发送请求后触发，可能存在消息发送失败依然触发该事件的情况，或消息还未发送出去便提前触发了该事件。因此，你无法直接在该事件触发后就去调用 <code>MessageChain.getSource().recall()</code> 等函数，因为此时消息还未被真正发送出去。</p></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Euphony</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="At.html">At</a></div><div class="sidebar-section-children"><a href="AtAll.html">AtAll</a></div><div class="sidebar-section-children"><a href="Audio.html">Audio</a></div><div class="sidebar-section-children"><a href="Cache.html">Cache</a></div><div class="sidebar-section-children"><a href="Client.html">Client</a></div><div class="sidebar-section-children"><a href="Contact.html">Contact</a></div><div class="sidebar-section-children"><a href="EventChannel.html">EventChannel</a></div><div class="sidebar-section-children"><a href="Friend.html">Friend</a></div><div class="sidebar-section-children"><a href="Group.html">Group</a></div><div class="sidebar-section-children"><a href="Image.html">Image</a></div><div class="sidebar-section-children"><a href="Member.html">Member</a></div><div class="sidebar-section-children"><a href="MessageChain.html">MessageChain</a></div><div class="sidebar-section-children"><a href="MessageSource.html">MessageSource</a></div><div class="sidebar-section-children"><a href="PlainText.html">PlainText</a></div><div class="sidebar-section-children"><a href="Raw.html">Raw</a></div><div class="sidebar-section-children"><a href="SingleMessage.html">SingleMessage</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#convertUidToUin">convertUidToUin</a></div><div class="sidebar-section-children"><a href="global.html#convertUinToUid">convertUinToUid</a></div><div class="sidebar-section-children"><a href="global.html#invokeNative">invokeNative</a></div><div class="sidebar-section-children"><a href="global.html#subscribeEvent">subscribeEvent</a></div><div class="sidebar-section-children"><a href="global.html#unsubscribeEvent">unsubscribeEvent</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>